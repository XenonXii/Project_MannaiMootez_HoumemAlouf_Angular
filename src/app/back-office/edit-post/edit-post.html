<div class="p-3 md:p-6 space-y-4 md:space-y-6 bg-slate-50 min-h-screen">
    @if (post) {
    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-lg p-6 border border-slate-200">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
                <button onclick="history.back()"
                    class="w-10 h-10 bg-slate-100 hover:bg-slate-200 rounded-xl flex items-center justify-center transition-colors">
                    <svg class="w-5 h-5 text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <div>
                    <h1 class="text-3xl font-bold text-slate-900">Edit Post</h1>
                </div>
            </div>

        </div>
    </div>





<!-- Form -->
<div class="bg-white rounded-2xl shadow-lg p-8 border border-slate-200 ">
    <form class="space-y-6" [formGroup]="postForm" (ngSubmit)="onSubmit()">

        <!-- Title -->
        <div>
            <label class="block text-lg font-semibold text-slate-700 mb-2">
                Post Title
            </label>
            <input type="text" formControlName="title" placeholder="Enter an engaging title..." class="w-full px-4 py-3 rounded-xl border border-slate-300 bg-white text-slate-900 placeholder-slate-400 
          focus:outline-none focus:ring-2 focus:ring-blue-600 transition">
        </div>
        @if (postForm.get('title')?.invalid && postForm.get('title')?.touched) {
        <div class="text-sm text-red-600 mt-1 bg-red-300/20 p-2 rounded-lg border border-red-400">
            Title is required.
        </div>
        }

        <!-- Description -->
        <div>
            <label class="block text-lg font-semibold text-slate-700 mb-2">
                Description
            </label>
            <textarea rows="4" formControlName="description" placeholder="Write a brief description..." class="w-full px-4 py-3 
        rounded-xl border border-slate-300 bg-white text-slate-900 placeholder-slate-400 
          focus:outline-none focus:ring-2 focus:ring-blue-600 transition resize-none"></textarea>
        </div>
        @if (postForm.get('description')?.invalid && postForm.get('description')?.touched) {
        <div class="text-sm text-red-600 mt-0 bg-red-300/20 p-2 rounded-lg border border-red-400">
            Description is required.
        </div>
        }

        <!-- Image URL -->
        <div>
            <label class="block text-lg font-semibold text-slate-700 mb-2">
                Image URL
            </label>
            <input type="url" formControlName="image" placeholder="https://example.com/image.jpg" class="w-full px-4 py-3 rounded-xl border border-slate-300 bg-white text-slate-900 placeholder-slate-400 
          focus:outline-none focus:ring-2 focus:ring-blue-600 transition">
            <img [src]="postForm.get('image')?.value " alt="" class="mt-2 rounded-xl max-h-48 object-cover">
            @if (postForm.get('image')?.invalid && postForm.get('image')?.dirty) {
            <div class="text-sm text-red-600 mt-1 bg-red-300/20 p-2 rounded-lg border border-red-400">
                Image is required.
            </div>
            }
        </div>

        <!-- Tags -->
        <div formArrayName="tags">
            <label class="block text-lg font-semibold text-slate-700 mb-2">Tags</label>

            @for (tag of getTags.controls; track $index) {
            <div class="flex items-center gap-2 mb-2">
                <input type="text" [formControlName]="$index" placeholder="Enter Tag.." class="w-full px-4 py-3 rounded-xl border border-slate-300 bg-white placeholder-slate-400 
              focus:outline-none focus:ring-2 focus:ring-blue-600 transition">
                @if(tag.invalid && tag.touched) {
                <div class="text-sm text-red-600 mt-1 bg-red-300/20 p-2 rounded-lg border border-red-400">
                    Tag cannot be empty.
                </div>
                }
                <button type="button" (click)="removeTag($index)"
                    class="px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                    âœ•
                </button>
            </div>
            }


        </div>
        @if (getTags.controls.length<1 ) { <div
            class="text-sm text-red-600 mt-1 bg-red-300/20 p-2 rounded-lg border border-red-400">
            At least one tag is required.
</div>
}
<button type="button" (click)="onAddTag()"
    class="px-5 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition">
    + Add Tag
</button>

<!-- Options Row -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">

    <!-- Visible checkbox -->
    <div class="flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
        <input type="checkbox" formControlName="visible" id="visible"
            class="w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-600">
        <label for="visible" class="text-sm font-medium text-slate-700">Make post visible immediately</label>
    </div>

    <!-- Hot checkbox -->
    <div class="flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
        <input type="checkbox" formControlName="hot" id="hot"
            class="w-5 h-5 rounded border-slate-300 text-orange-600 focus:ring-orange-600">
        <label for="hot" class="text-sm font-medium text-slate-700">ðŸ”¥ Mark as hot topic</label>
    </div>
</div>

<!-- Buttons -->
<div class="flex flex-wrap gap-3 pt-4">
    <button type="submit"
        class="px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold shadow hover:bg-blue-700 transition">
        Save Post
    </button>



    <button type="button" (click)="onResetForm()"
        class="px-6 py-3 bg-white text-slate-700 rounded-xl border border-slate-300 hover:bg-slate-50 transition">
        Cancel
    </button>
</div>
</form>
</div>

}
</div>